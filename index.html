<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>üé£ Fishing Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:url("https://images.unsplash.com/photo-1502082553048-f009c37129b9") center/cover no-repeat;
}
.overlay{background:rgba(0,0,0,.45);min-height:100vh;padding:12px}
.header{text-align:center;color:#fff;font-size:26px;font-weight:700;margin-bottom:12px}

.menu{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  max-width:420px;
  margin:0 auto;
}
.menu-btn{
  background:linear-gradient(#8b5a2b,#5c3a1e);
  border-radius:14px;
  padding:12px 6px;
  text-align:center;
  color:#fff;
  font-weight:600;
}
.menu-btn span{display:block;font-size:26px}

.screen{
  display:none;
  max-width:420px;
  margin:12px auto 0;
  background:#fff;
  border-radius:16px;
  padding:14px;
}
.screen.active{display:block}

button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:14px;
  font-size:16px;
}
.primary{background:#ffd000;font-weight:700}
.gray{background:#eee}
.locked{background:#ddd;color:#888}
.ton{background:#7c5cff;color:#fff;font-weight:700}
.r-common{color:#444}
.r-rare{color:#1e88e5;font-weight:600}
.r-legend{color:#8e24aa;font-weight:700}
</style>
</head>

<body>
<div class="overlay">

<div class="header">üé£ –†–ò–ë–ê–õ–ö–ê</div>

<!-- –ú–ï–ù–Æ -->
<div class="menu">
  <div class="menu-btn" onclick="openScreen('fishing')"><span>üé£</span>–†–∏–±–∞–ª–∫–∞</div>
  <div class="menu-btn" onclick="openScreen('inventory')"><span>üéí</span>–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</div>
  <div class="menu-btn" onclick="openScreen('locations')"><span>üó∫</span>–õ–æ–∫–∞—Ü—ñ—ó</div>
  <div class="menu-btn" onclick="openScreen('shop')"><span>üõí</span>–ú–∞–≥–∞–∑–∏–Ω</div>
  <div class="menu-btn" onclick="openScreen('stats')"><span>üìñ</span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
</div>

<!-- –†–ò–ë–ê–õ–ö–ê -->
<div id="fishing" class="screen">
  <h3>üé£ –†–∏–±–∞–ª–∫–∞ ‚Äî <span id="locName"></span></h3>
  <button class="primary" onclick="catchFish()">–ó–∞–∫–∏–Ω—É—Ç–∏ –≤—É–¥–∫—É</button>
  <button class="gray" onclick="sellFish()">üí∞ –ü—Ä–æ–¥–∞—Ç–∏ —Ä–∏–±—É</button>
  <div id="catch"></div>
</div>

<!-- –Ü–ù–í–ï–ù–¢–ê–† -->
<div id="inventory" class="screen">
  <h3>üéí –Ü–Ω–≤–µ–Ω—Ç–∞—Ä</h3>
  <div id="inv"></div>
</div>

<!-- –õ–û–ö–ê–¶–Ü–á -->
<div id="locations" class="screen">
  <h3>üó∫ –õ–æ–∫–∞—Ü—ñ—ó</h3>
  <div id="locList"></div>
</div>

<!-- –ú–ê–ì–ê–ó–ò–ù -->
<div id="shop" class="screen">
  <h3>üõí –ú–∞–≥–∞–∑–∏–Ω</h3>
  <div id="shopRods"></div>
  <div id="shopBait"></div>
  <div id="shopFeed"></div>
  <div id="shopGear"></div>
</div>

<!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
<div id="stats" class="screen">
  <h3>üìñ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
  <div id="statsText"></div>
</div>

</div>

<script>
/* === SAVE === */
function loadGame(){return JSON.parse(localStorage.getItem("fishingGame")||"null")}
function saveGame(){localStorage.setItem("fishingGame",JSON.stringify(player))}

/* === PLAYER === */
let player=loadGame()||{
  fish:{},
  coins:0,tons:0,level:1,location:0,rod:0,
  bait:0,feed:0,gear:{landingNet:false},lastTonCatch:0
};

/* === RODS === */
const rods=[
  {name:"–°—Ç–∞—Ä–∞ –≤—É–¥–∫–∞",power:1,price:0},
  {name:"–î–æ–±—Ä–∞ –≤—É–¥–∫–∞",power:2,price:50},
  {name:"–ü—Ä–æ—Ñ—ñ –≤—É–¥–∫–∞",power:3,price:250},
  {name:"–¢—É—Ä–±–æ –≤—É–¥–∫–∞",power:4,price:500},
  {name:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞ –≤—É–¥–∫–∞",power:5,tonPrice:15,legendary:true}
];

/* === RARITY === */
const rarityTable=[
  {key:"common",name:"‚ö™ –ó–≤–∏—á–∞–π–Ω–∞",chance:0.70,mult:1,cls:"r-common"},
  {key:"rare",name:"üîµ –†—ñ–¥–∫—ñ—Å–Ω–∞",chance:0.25,mult:1.5,cls:"r-rare"},
  {key:"legend",name:"üü£ –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞",chance:0.05,mult:3,cls:"r-legend"}
];

function rollRarity(bonus=0){
  let r=Math.random()-bonus;
  let acc=0;
  for(let x of rarityTable){
    acc+=x.chance;
    if(r<=acc) return x;
  }
  return rarityTable[0];
}

/* === DATA === */
const locations=[
  {name:"üåä –û–∑–µ—Ä–æ",level:1,fish:[{name:"–ö–∞—Ä–∞—Å—å",weight:10},{name:"–û–∫—É–Ω—å",weight:9}]},
  {name:"üåø –°—Ç–∞–≤–æ–∫",level:3,fish:[{name:"–õ–∏–Ω",weight:8},{name:"–ö–∞—Ä–∞—Å—å –≤–µ–ª–∏–∫–∏–π",weight:7}]},
  {name:"üåÖ –†—ñ—á–∫–∞",level:6,fish:[{name:"–ö–æ—Ä–æ–ø",weight:6},{name:"–©—É–∫–∞",weight:5}]},
  {name:"üåå –ú–æ—Ä–µ",level:10,fish:[{name:"–¢—É–Ω–µ—Ü—å",weight:3},{name:"–ú–∞—Ä–ª—ñ–Ω",weight:2}]},
  {name:"üåä –û–∫–µ–∞–Ω",level:15,fish:[{name:"–ê–∫—É–ª–∞",weight:1}]}
];

/* === NAV === */
function openScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* === CATCH === */
function catchFish(){
  const rod=rods[player.rod];
  let power=rod.power;
  if(player.bait>0){power++;player.bait--}
  if(player.feed>0){power++;player.feed--}

  let rarityBonus=player.feed>0?0.05:0;
  const rarity=rollRarity(rarityBonus);

  const loc=locations[player.location];
  const index=Math.min(Math.floor(Math.random()*power),loc.fish.length-1);
  const baseFish=loc.fish[index];

  const key=`${baseFish.name}|${rarity.key}`;
  player.fish[key]=(player.fish[key]||0)+1;

  document.getElementById("catch").innerHTML=
    `üé£ ${baseFish.name} <span class="${rarity.cls}">(${rarity.name})</span>`;
  saveGame();render();
}

/* === SELL === */
function sellFish(){
  let coins=0;
  for(let k in player.fish){
    const [name,rar]=k.split("|");
    const r=rarityTable.find(x=>x.key===rar);
    for(let l of locations){
      let f=l.fish.find(x=>x.name===name);
      if(f) coins+=Math.floor((player.fish[k]/f.weight)*r.mult);
    }
  }
  player.coins+=coins;
  player.fish={};
  if(player.coins>=player.level*10) player.level++;
  document.getElementById("catch").innerText=`üí∞ +${coins} –º–æ–Ω–µ—Ç`;
  saveGame();render();
}

/* === LOCATION === */
function changeLocation(i){
  if(player.level>=locations[i].level){player.location=i;openScreen("fishing")}
  saveGame();render();
}

/* === RENDER === */
function render(){
  document.getElementById("locName").innerText=locations[player.location].name;

  document.getElementById("inv").innerHTML=
    Object.keys(player.fish).length
      ? Object.entries(player.fish).map(([k,v])=>{
          const [n,r]=k.split("|");
          const rr=rarityTable.find(x=>x.key===r);
          return `${n} <span class="${rr.cls}">(${rr.name})</span>: ${v}`;
        }).join("<br>")
      : "–ü–æ—Ä–æ–∂–Ω—å–æ";

  document.getElementById("locList").innerHTML=
    locations.map((l,i)=>player.level>=l.level
      ? `<button class="gray" onclick="changeLocation(${i})">${l.name}</button>`
      : `<button class="locked">${l.name} (lvl ${l.level})</button>`
    ).join("");

  document.getElementById("statsText").innerHTML=
    `ü™ô –ú–æ–Ω–µ—Ç–∏: ${player.coins}<br>
     ‚≠ê –†—ñ–≤–µ–Ω—å: ${player.level}<br>
     üé£ –í—É–¥–∫–∞: ${rods[player.rod].name}`;
}

render();
</script>
</body>
</html>
