<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ğŸ£ Ğ Ğ¸Ğ±Ğ°Ğ»ĞºĞ°</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  min-height:100vh;
  background-size:cover;
  background-position:center;
  color:#fff;
}
.overlay{
  background:rgba(0,0,0,.55);
  min-height:100vh;
  padding-bottom:80px;
}
.header{
  text-align:center;
  font-size:26px;
  padding:14px;
  font-weight:700;
}
.panel{
  max-width:420px;
  margin:0 auto;
  background:rgba(255,255,255,.12);
  border-radius:18px;
  padding:16px;
}
button{
  width:100%;
  border:none;
  border-radius:14px;
  padding:14px;
  font-size:16px;
  margin:6px 0;
}
.primary{background:#ffd400}
.gray{background:#ddd}
.ton{background:#6cf}
.lock{background:#777}
.navbar{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#111;
  display:flex;
}
.navbar div{
  flex:1;
  text-align:center;
  padding:10px;
  font-size:14px;
}
.screen{display:none}
.screen.active{display:block}

/* animation */
.rod{
  position:fixed;
  right:-60px;
  top:35%;
  font-size:50px;
  transition:.5s;
}
.rod.cast{right:20px;transform:rotate(-30deg)}
.float{
  position:fixed;
  top:55%;
  left:50%;
  transform:translateX(-50%);
  font-size:26px;
  opacity:0;
}
.float.show{opacity:1}
</style>
</head>

<body>
<div class="overlay">
  <div class="header">ğŸ£ Ğ Ğ¸Ğ±Ğ°Ğ»ĞºĞ°</div>

  <div class="panel screen active" id="game">
    <div id="locationName"></div>
    <button class="primary" onclick="cast()">ğŸ£ Ğ—Ğ°ĞºĞ¸Ğ½ÑƒÑ‚Ğ¸ Ğ²ÑƒĞ´ĞºÑƒ</button>
    <button class="gray" onclick="sell()">ğŸ’° ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ²ÑÑ Ñ€Ğ¸Ğ±Ñƒ</button>
    <div id="log"></div>
  </div>

  <div class="panel screen" id="inventory"></div>
  <div class="panel screen" id="shop"></div>
  <div class="panel screen" id="locations"></div>
</div>

<div class="rod" id="rod">ğŸ£</div>
<div class="float" id="float">ğŸˆ</div>

<div class="navbar">
  <div onclick="openScreen('game')">ğŸ£<br>Ğ“Ñ€Ğ°</div>
  <div onclick="openScreen('inventory')">ğŸ’<br>Ğ†Ğ½Ğ².</div>
  <div onclick="openScreen('shop')">ğŸ›’<br>ĞœĞ°Ğ³.</div>
  <div onclick="openScreen('locations')">ğŸ—º<br>ĞœĞ°Ğ¿Ğ°</div>
</div>

<script>
const locations=[
 {name:"ğŸŒŠ ĞĞ·ĞµÑ€Ğ¾",bg:"https://images.unsplash.com/photo-1502082553048-f009c37129b9",
  fish:[{n:"ĞšĞ°Ñ€Ğ°ÑÑŒ",v:10},{n:"ĞĞºÑƒĞ½ÑŒ",v:8}]},
 {name:"ğŸ Ğ Ñ–Ñ‡ĞºĞ°",bg:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e",
  fish:[{n:"ĞšĞ¾Ñ€Ğ¾Ğ¿",v:8},{n:"Ğ©ÑƒĞºĞ°",v:5}]},
 {name:"ğŸŒ² Ğ›Ñ–Ñ",bg:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee",
  fish:[{n:"Ğ›Ğ¸Ğ½",v:8},{n:"Ğ›ÑÑ‰",v:5}]},
 {name:"ğŸŒ… ĞœĞ¾Ñ€Ğµ",bg:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e",
  fish:[{n:"Ğ¢ÑƒĞ½ĞµÑ†ÑŒ",v:5},{n:"ĞœĞ°Ñ€Ğ»Ñ–Ğ½",v:3}]},
 {name:"ğŸŒŒ Ğ“Ğ»Ğ¸Ğ±Ğ¸Ğ½Ğ°",bg:"https://images.unsplash.com/photo-1500534314209-a26db0f5c3b1",
  fish:[{n:"ğŸ’ TON-Ñ€Ğ¸Ğ±Ğ°",ton:1,legend:true}]}
];

let game=JSON.parse(localStorage.getItem("fishGame"))||{
 loc:0, fish:{}, coins:0, tons:0, rod:0
};

function save(){localStorage.setItem("fishGame",JSON.stringify(game))}
function bg(){document.body.style.backgroundImage=`url('${locations[game.loc].bg}')`}
bg();

function openScreen(id){
 document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 render();
}

function cast(){
 document.getElementById("rod").classList.add("cast");
 document.getElementById("float").classList.add("show");
 setTimeout(()=>{
  const list=locations[game.loc].fish;
  const f=list[Math.floor(Math.random()*list.length)];
  if(f.legend && Math.random()<0.1){
    game.tons+=1;
    log("ğŸ’ Ğ¡Ğ¿Ñ–Ğ¹Ğ¼Ğ°Ğ² TON-Ñ€Ğ¸Ğ±Ñƒ!");
  }else{
    game.fish[f.n]=(game.fish[f.n]||0)+1;
    log("ğŸ£ Ğ¡Ğ¿Ñ–Ğ¹Ğ¼Ğ°Ğ² "+f.n);
  }
  save();
  render();
  document.getElementById("rod").classList.remove("cast");
  document.getElementById("float").classList.remove("show");
 },1200);
}

function sell(){
 let earned=0;
 for(let k in game.fish){
  const f=locations.flatMap(l=>l.fish).find(x=>x.n===k);
  if(f && f.v) earned+=Math.floor(game.fish[k]/f.v);
 }
 game.coins+=earned;
 game.fish={};
 log("ğŸ’° Ğ—Ğ°Ñ€Ğ¾Ğ±Ğ¸Ğ² "+earned+" Ğ¼Ğ¾Ğ½ĞµÑ‚");
 save();render();
}

function render(){
 document.getElementById("locationName").innerHTML=
  `<b>${locations[game.loc].name}</b><br>ğŸª™ ${game.coins} | ğŸ’ ${game.tons}`;

 document.getElementById("inventory").innerHTML=
  "<h3>ğŸ’ Ğ†Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€</h3>"+
  (Object.keys(game.fish).length?
   Object.entries(game.fish).map(e=>e[0]+": "+e[1]).join("<br>")
   :"ĞŸĞ¾Ñ€Ğ¾Ğ¶Ğ½ÑŒĞ¾");

 document.getElementById("locations").innerHTML=
  "<h3>ğŸ—º Ğ›Ğ¾ĞºĞ°Ñ†Ñ–Ñ—</h3>"+
  locations.map((l,i)=>`<button onclick="game.loc=${i};bg();openScreen('game')">${l.name}</button>`).join("");

 document.getElementById("shop").innerHTML=
  "<h3>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h3>"+
  "<div>ğŸ’ TON Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ğ´Ğ»Ñ Ñ€Ñ–Ğ´ĞºÑ–ÑĞ½Ğ¾Ñ— Ñ€Ğ¸Ğ±Ğ¸</div>";
}

function log(t){document.getElementById("log").innerText=t}
render();
</script>
</body>
</html>
