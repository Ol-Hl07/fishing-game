<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ğŸ£ Ğ Ğ¸Ğ±Ğ°Ğ»ĞºĞ°</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  min-height:100vh;
  background-size:cover;
  background-position:center;
  color:#fff;
}
.overlay{
  background:rgba(0,0,0,.55);
  min-height:100vh;
  padding-bottom:90px;
}
.header{
  text-align:center;
  font-size:26px;
  padding:14px;
  font-weight:700;
}
.panel{
  max-width:420px;
  margin:0 auto;
  background:rgba(255,255,255,.12);
  border-radius:18px;
  padding:16px;
}
button{
  width:100%;
  border:none;
  border-radius:14px;
  padding:14px;
  font-size:16px;
  margin:6px 0;
}
.primary{background:#ffd400}
.gray{background:#ddd}
.ton{background:#6cf}
.lock{background:#777}
.navbar{
  position:fixed;
  bottom:0;left:0;right:0;
  background:#111;
  display:flex;
}
.navbar div{
  flex:1;
  text-align:center;
  padding:10px;
  font-size:14px;
}
.screen{display:none}
.screen.active{display:block}

/* animation */
.rod{
  position:fixed;
  right:-60px;
  top:35%;
  font-size:50px;
  transition:.5s;
}
.rod.cast{right:20px;transform:rotate(-30deg)}
.float{
  position:fixed;
  top:55%;
  left:50%;
  transform:translateX(-50%);
  font-size:26px;
  opacity:0;
}
.float.show{opacity:1}
</style>
</head>

<body>
<div class="overlay">
  <div class="header">ğŸ£ Ğ Ğ¸Ğ±Ğ°Ğ»ĞºĞ°</div>

  <div class="panel screen active" id="game">
    <div id="locationName"></div>
    <button class="primary" onclick="cast()">ğŸ£ Ğ—Ğ°ĞºĞ¸Ğ½ÑƒÑ‚Ğ¸ Ğ²ÑƒĞ´ĞºÑƒ</button>
    <button class="gray" onclick="sell()">ğŸ’° ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ²ÑÑ Ñ€Ğ¸Ğ±Ñƒ</button>
    <div id="log"></div>
  </div>

  <div class="panel screen" id="inventory"></div>
  <div class="panel screen" id="shop"></div>
  <div class="panel screen" id="locations"></div>
</div>

<div class="rod" id="rod">ğŸ£</div>
<div class="float" id="float">ğŸˆ</div>

<div class="navbar">
  <div onclick="openScreen('game')">ğŸ£<br>Ğ“Ñ€Ğ°</div>
  <div onclick="openScreen('inventory')">ğŸ’<br>Ğ†Ğ½Ğ².</div>
  <div onclick="openScreen('shop')">ğŸ›’<br>ĞœĞ°Ğ³.</div>
  <div onclick="openScreen('locations')">ğŸ—º<br>ĞœĞ°Ğ¿Ğ°</div>
</div>

<script>
/* ===== Ğ”ĞĞĞ† ===== */
const locations=[
 {name:"ğŸŒŠ ĞĞ·ĞµÑ€Ğ¾",bg:"https://images.unsplash.com/photo-1502082553048-f009c37129b9",
  fish:[{n:"ĞšĞ°Ñ€Ğ°ÑÑŒ",v:10},{n:"ĞĞºÑƒĞ½ÑŒ",v:8}]},
 {name:"ğŸ Ğ Ñ–Ñ‡ĞºĞ°",bg:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e",
  fish:[{n:"ĞšĞ¾Ñ€Ğ¾Ğ¿",v:8},{n:"Ğ©ÑƒĞºĞ°",v:5}]},
 {name:"ğŸŒ… ĞœĞ¾Ñ€Ğµ",bg:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e",
  fish:[{n:"Ğ¢ÑƒĞ½ĞµÑ†ÑŒ",v:5},{n:"ĞœĞ°Ñ€Ğ»Ñ–Ğ½",v:3}]},
 {name:"ğŸŒŒ Ğ“Ğ»Ğ¸Ğ±Ğ¸Ğ½Ğ°",bg:"https://images.unsplash.com/photo-1500534314209-a26db0f5c3b1",
  fish:[{n:"ğŸ’ TON-Ñ€Ğ¸Ğ±Ğ°",ton:1,legend:true}]}
];

const rods=[
 {name:"Ğ¡Ñ‚Ğ°Ñ€Ğ° Ğ²ÑƒĞ´ĞºĞ°",power:1,price:0},
 {name:"Ğ”Ğ¾Ğ±Ñ€Ğ° Ğ²ÑƒĞ´ĞºĞ°",power:2,price:50},
 {name:"ĞŸÑ€Ğ¾Ñ„Ñ– Ğ²ÑƒĞ´ĞºĞ°",power:3,price:250},
 {name:"Ğ¢ÑƒÑ€Ğ±Ğ¾ Ğ²ÑƒĞ´ĞºĞ°",power:4,price:500},
 {name:"Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ğ° Ğ²ÑƒĞ´ĞºĞ°",power:5,ton:15,tonChance:0.10}
];

const gear=[
 {id:"hook",name:"ĞŸĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ³Ğ°Ñ‡Ğ¾Ğº",price:100,bonus:0.05},
 {id:"bait",name:"ĞŸÑ€Ğ¸ĞºĞ¾Ñ€Ğ¼",price:150,bonus:0.07},
 {id:"net",name:"ĞŸÑ–Ğ´ÑĞ°ĞºĞ°",ton:5,tonBonus:0.05}
];

/* ===== Ğ—Ğ‘Ğ•Ğ Ğ•Ğ–Ğ•ĞĞĞ¯ ===== */
let game=JSON.parse(localStorage.getItem("fishGame"))||{
 loc:0,fish:{},coins:0,tons:0,
 rod:0,gear:{hook:false,bait:false,net:false}
};
function save(){localStorage.setItem("fishGame",JSON.stringify(game))}

/* ===== Ğ¤ĞĞ ===== */
function bg(){
 document.body.style.backgroundImage=`url('${locations[game.loc].bg}')`;
}
bg();

/* ===== ĞĞĞ’Ğ†Ğ“ĞĞ¦Ğ†Ğ¯ ===== */
function openScreen(id){
 document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 render();
}

/* ===== Ğ“Ğ Ğ ===== */
function cast(){
 document.getElementById("rod").classList.add("cast");
 document.getElementById("float").classList.add("show");

 setTimeout(()=>{
  let tonChance=0;
  if(rods[game.rod].tonChance) tonChance+=rods[game.rod].tonChance;
  if(game.gear.net) tonChance+=0.05;

  if(Math.random()<tonChance){
    game.tons+=1;
    log("ğŸ’ Ğ¡Ğ¿Ñ–Ğ¹Ğ¼Ğ°Ğ² TON-Ñ€Ğ¸Ğ±Ñƒ!");
  }else{
    const list=locations[game.loc].fish;
    const f=list[Math.floor(Math.random()*list.length)];
    game.fish[f.n]=(game.fish[f.n]||0)+1;
    log("ğŸ£ Ğ¡Ğ¿Ñ–Ğ¹Ğ¼Ğ°Ğ² "+f.n);
  }
  save();render();
  document.getElementById("rod").classList.remove("cast");
  document.getElementById("float").classList.remove("show");
 },1200);
}

function sell(){
 let earned=0;
 for(let k in game.fish){
  const f=locations.flatMap(l=>l.fish).find(x=>x.n===k);
  if(f && f.v) earned+=Math.floor(game.fish[k]/f.v);
 }
 game.coins+=earned;
 game.fish={};
 log("ğŸ’° +" + earned + " Ğ¼Ğ¾Ğ½ĞµÑ‚");
 save();render();
}

/* ===== ĞŸĞĞšĞ£ĞŸĞšĞ˜ ===== */
function buyRod(i){
 const r=rods[i];
 if(r.price && game.coins>=r.price){game.coins-=r.price;game.rod=i}
 if(r.ton && game.tons>=r.ton){game.tons-=r.ton;game.rod=i}
 save();render();
}
function buyGear(id){
 const g=gear.find(x=>x.id===id);
 if(g.price && game.coins>=g.price){game.coins-=g.price;game.gear[id]=true}
 if(g.ton && game.tons>=g.ton){game.tons-=g.ton;game.gear[id]=true}
 save();render();
}

/* ===== Ğ Ğ•ĞĞ”Ğ•Ğ  ===== */
function render(){
 document.getElementById("locationName").innerHTML=
 `<b>${locations[game.loc].name}</b><br>ğŸª™ ${game.coins} | ğŸ’ ${game.tons}`;

 document.getElementById("inventory").innerHTML=
 "<h3>ğŸ’ Ğ†Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€</h3>"+
 (Object.keys(game.fish).length
  ? Object.entries(game.fish).map(e=>`${e[0]}: ${e[1]}`).join("<br>")
  :"ĞŸĞ¾Ñ€Ğ¾Ğ¶Ğ½ÑŒĞ¾");

 document.getElementById("locations").innerHTML=
 "<h3>ğŸ—º Ğ›Ğ¾ĞºĞ°Ñ†Ñ–Ñ—</h3>"+
 locations.map((l,i)=>`<button onclick="game.loc=${i};bg();openScreen('game')">${l.name}</button>`).join("");

 document.getElementById("shop").innerHTML=
 "<h3>ğŸ›’ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h3><b>Ğ’ÑƒĞ´ĞºĞ¸</b><br>"+
 rods.map((r,i)=>{
  if(i===game.rod) return `<button class="lock">âœ… ${r.name}</button>`;
  if(r.price) return `<button onclick="buyRod(${i})">${r.name} â€” ${r.price} ğŸª™</button>`;
  return `<button class="ton" onclick="buyRod(${i})">${r.name} â€” ${r.ton} ğŸ’</button>`;
 }).join("")+
 "<hr><b>Ğ¡Ğ½Ğ°ÑÑ‚Ñ–</b><br>"+
 gear.map(g=>{
  if(game.gear[g.id]) return `<button class="lock">âœ… ${g.name}</button>`;
  if(g.price) return `<button onclick="buyGear('${g.id}')">${g.name} â€” ${g.price} ğŸª™</button>`;
  return `<button class="ton" onclick="buyGear('${g.id}')">${g.name} â€” ${g.ton} ğŸ’</button>`;
 }).join("");
}

function log(t){document.getElementById("log").innerText=t}
render();
</script>
</body>
</html>
